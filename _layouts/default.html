---
tipue_search_active: true
---

<!doctype html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>Pandorabots Documentation</title>
    <link rel="stylesheet" href="{{ "/assets/css/styles.css" | relative_url }}">
    {% if page.tipue_search_active or layout.tipue_search_active %}
      <link rel="stylesheet" href="{{ "/assets/tipuesearch/css/normalize.css" | relative_url }}">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
      <script src="{{ "/assets/tipuesearch/tipuesearch_content.js" | relative_url }}"></script>
      <link rel="stylesheet" href="{{ "/assets/tipuesearch/css/tipuesearch.css" | relative_url }}">
      <script src="{{ "/assets/tipuesearch/tipuesearch_set.js" | relative_url }}"></script>
      <script src="{{ "/assets/tipuesearch/tipuesearch.min.js" | relative_url }}"></script>
    {% endif %}
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-49503515-7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-49503515-7');
    </script>
  </head>
  <body>
    <div class="pb-docs">
        {{ content }}
    </div>

    <script>
      function indexByRegex(string, regex, startpos = 0) {
        const substring = string.substring(startpos)

        let match = substring.match(regex)

        let index = string.substring(startpos).search(regex)
        index = (index >= 0) ? (index + (startpos || 0)) : index

        return {
          index,
          match
        }
      }

      function getMatchIndices(string, regex, queryLength, startpos=0) {
        const substring = string.substring(startpos)

        let matchMap = []

        while((matches = regex.exec(substring)) !== null) {
          const prevMatchIndex = parseInt(regex.lastIndex)
          const matchStart = (prevMatchIndex - queryLength)

          matchMap.push({match: matches[0], index: matchStart})
        }

        return matchMap
      }

      function restoreSpacing(item) {
        if(item == '<' || item == '>') {
          return ''
        } else {
          return item
        }
      }

      $(document).ready(function() {
        $('#tipue_search_input').tipuesearch();
        if(window.location.search.includes('?search=')) {
          let searchQuery = (window.location.search.split('&')[0] || '').split(/[\?\=]/)
          searchQuery = searchQuery[searchQuery.length - 1]

          if(searchQuery) {
            let pageContent = document.querySelector('.pb-docs__content')

            let regex = new RegExp(`(${searchQuery})`, 'ig')

            let results = getMatchIndices(pageContent.innerHTML, regex, searchQuery.length)

            const resultSpanOpen = '<span id="search-result">'
            const resultSpanClose = '</span>'

            let before = 0
            results.forEach((result, index) => {
              let resultLocation = (result.index + ((resultSpanOpen.length + resultSpanClose.length) * index))
              if(resultLocation < 0) return null

              let before = pageContent.innerHTML.substr(0, resultLocation)
              let offset = (resultLocation + searchQuery.length)
              let after = pageContent.innerHTML.substr(offset, pageContent.innerHTML.length)

              pageContent.innerHTML = before + resultSpanOpen + result.match + resultSpanClose + after
            })
            const firstResult = document.querySelector('.pb-docs__content #search-result')
            pageContent.scrollTop = firstResult.offsetTop - 30
          }
        }
      });
    </script>
  </body>
</html>
